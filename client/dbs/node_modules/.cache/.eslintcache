[{"/home/yehor/React/DBS/client/dbs/src/index.js":"1","/home/yehor/React/DBS/client/dbs/src/components/home.js":"2","/home/yehor/React/DBS/client/dbs/src/components/deletePerson.js":"3","/home/yehor/React/DBS/client/dbs/src/components/loading.js":"4","/home/yehor/React/DBS/client/dbs/src/components/addGroup.js":"5","/home/yehor/React/DBS/client/dbs/src/components/addPerson.js":"6","/home/yehor/React/DBS/client/dbs/src/components/addPayment.js":"7","/home/yehor/React/DBS/client/dbs/src/components/tableWithPagination.js":"8","/home/yehor/React/DBS/client/dbs/src/components/tableData.js":"9"},{"size":341,"mtime":1672409823976,"results":"10","hashOfConfig":"11"},{"size":13472,"mtime":1673470054949,"results":"12","hashOfConfig":"11"},{"size":1907,"mtime":1672479236371,"results":"13","hashOfConfig":"11"},{"size":401,"mtime":1673171552218,"results":"14","hashOfConfig":"11"},{"size":2802,"mtime":1672479333561,"results":"15","hashOfConfig":"11"},{"size":11186,"mtime":1673084796413,"results":"16","hashOfConfig":"11"},{"size":2007,"mtime":1672479211121,"results":"17","hashOfConfig":"11"},{"size":4954,"mtime":1674111991311,"results":"18","hashOfConfig":"11"},{"size":547,"mtime":1673030544945,"results":"19","hashOfConfig":"11"},{"filePath":"20","messages":"21","suppressedMessages":"22","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1rtuird",{"filePath":"23","messages":"24","suppressedMessages":"25","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"26"},{"filePath":"27","messages":"28","suppressedMessages":"29","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"30","messages":"31","suppressedMessages":"32","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","suppressedMessages":"35","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","suppressedMessages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"39","messages":"40","suppressedMessages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"42","messages":"43","suppressedMessages":"44","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","suppressedMessages":"47","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/home/yehor/React/DBS/client/dbs/src/index.js",[],[],"/home/yehor/React/DBS/client/dbs/src/components/home.js",["48"],[],"import React, { useState } from 'react'\n\nimport { Helmet } from 'react-helmet'\n\n\nimport './home.css'\nimport './table.css'\nimport AddPerson from './addPerson'\nimport DeletePerson from './deletePerson'\nimport Loading from './loading'\nimport AddGroup from './addGroup'\nimport AddPayment from './addPayment'\nimport TableWithPagination from './tableWithPagination'\n\nconst Home = (props) => {\n \n  const server_host_name = window.location.host.split(':')[0];\n\n  const defaultPersonData = {\n    role: 'manager',\n    name: null, \n    surname: null, \n    email: null, \n    phone: null,\n    gehalt: null,\n    description: null,\n    skype: null,\n    KW: null,\n    schulungsleitIDs: null,\n    managerID: null,\n    niveau: null,\n    gruppenID: null,\n    schuelerManagerID: null,\n    paymentDate: null,\n    paymentSum: null\n  }\n  const defaultGroupData = {\n    startDate: null, \n    endDate: null, \n    teacherID: null\n  }\n  const defaultPaymentData = {\n    startDate: null, \n    sum: null\n  }\n\n  const [personData, setPersonData] = useState(defaultPersonData);\n  const [groupData, setGroupData] = useState(defaultGroupData);\n  const [paymentData, setPaymentData] = useState(defaultPaymentData);\n\n  const [data, setData] = useState(null);\n  const [schulungsleitIDs, setSchulungsleitIDs] = React.useState(null);\n\tconst [managerIDs, setManagerIDs] = React.useState([]);\n\tconst [gruppenIDs, setGruppenIDs] = React.useState([]);\n\tconst [zahlungIDs, setZahlungIDs] = React.useState([]);\n  const [userAdded, setUserAdded] = useState(0);\n  const [userDeleted, setUserDeleted] = useState(0);\n  const [groupAdded, setGroupAdded] = useState(0);\n  const [paymentAdded, setPaymentAdded] = useState(0);\n  const [idToDelete, setIdToDelete] = useState(null);\n  const [error, setError] = useState(null);\n\n  const personChangeHandler = e => {\n\t\tconst {name, value} = e.target;\n\t\tsetPersonData(prevState => ({...prevState, [name]: value}));\n\t}\n\n  const personRoleChangeHandler = e => {\n\t\tconst {name, value} = e.target;\n    \n    setPersonData(prevState => {\n      if (prevState.role === value) {\n        return prevState;\n      } else {\n        document.getElementById('addPerson').reset();\n        setUserAdded(0);\n        return {...defaultPersonData, [name]: value};\n      }});\n\t}\n  \n  const idToDeleteHandler = ({value}) => {\n    setIdToDelete(value);\n  }\n\n  const groupChangeHandler = val => {\n    typeof(val) === 'object' && val !== null ? setGroupData(prevState => {\n      return {...prevState, [val.target.name]: val.target.value};\n      }) :\n\t\tsetGroupData(prevState => ({...prevState, teacherID: val}));\n\t}\n\n  const paymentChangeHandler = event => {\n    const {name, value} = event.target;\n\t\tsetPaymentData(prevState => ({...prevState, [name]: value}));\n\t}\n\n\n  const addPerson = (event) => {\n    event.preventDefault();\n    const {name, surname, email} = personData;\n    let phone = personData.phone;\n    if (phone === '' || phone === null) {\n      alert('Please enter a phone number again');\n      return;\n    } else {\n      phone = phone.replace('+', '%2b');\n    }\n\n    switch(personData.role) {\n      case 'manager':\n        const gehalt = personData.gehalt;\n        const description = personData.description;\n\n        fetch(`http://${server_host_name}:3001/addManager?name=${name}&surname=${surname}&email=${email}&phone=${phone}&gehalt=${gehalt}&description=${description}`)\n        .then(response => response.json())\n        .then((data) => {\n          if (Object.keys(data)[0] === 'error') {\n            setUserAdded(-1);\n            setError(data.error)\n          } else {\n            setUserAdded(1);\n            setError(null);\n          }\n          setPersonData(defaultPersonData);\n          document.getElementById('addPerson').reset();\n        })\n        break;\n      case 'lehrer':\n        const {skype, KW, schulungsleitID, managerID} = personData;\n\n        fetch(`http://${server_host_name}:3001/addTeacher?name=${name}&surname=${surname}&email=${email}&phone=${phone}&skype=${skype}&KW=${KW}&schulungsleitID=${schulungsleitID}&managerID=${managerID}`)\n        .then(response => response.json())\n        .then((data) => {\n          if (Object.keys(data)[0] === 'error') {\n            setUserAdded(-1);\n            setError(data.error)\n          } else {\n            setUserAdded(1);\n            setError(null);\n          }\n          setPersonData(defaultPersonData);\n          document.getElementById('addPerson').reset();\n        })\n        break;\n\n      case 'schueler':\n          const {niveau, gruppenID, paymentDate, paymentSum, managerID: schuelerManagerID} = personData;\n          \n          fetch(`http://${server_host_name}:3001/addStudent?name=${name}&surname=${surname}&email=${email}&phone=${phone}&niveau=${niveau}&gruppenID=${gruppenID}&managerID=${schuelerManagerID}&paymentDate=${paymentDate}&paymentSum=${paymentSum}`)\n          .then(response => response.json())\n          .then((data) => {\n            if (Object.keys(data)[0] === 'error') {\n              setUserAdded(-1);\n              setError(data.error)\n            } else {\n              setUserAdded(1);\n              setError(null);\n            }\n            setPersonData(defaultPersonData);\n            document.getElementById('addPerson').reset();\n          })\n          break;\n\n      default:\n        break;\n    }\n\n  }\n\n  const addGroup = (event) => {\n    event.preventDefault();\n\n    const {startDate, endDate, teacherID} = groupData;\n\n    const startDateJS = new Date(startDate);\n\t\tconst endDateJS = new Date(endDate);\n\n    if (endDateJS < startDateJS) {\n\t\t  alert(\"The end date must be after the start date.\");\n\t\t  return false;\n\t\t}\n\n    fetch(`http://${server_host_name}:3001/addGroup?startDate=${startDate}&endDate=${endDate}&teacherID=${teacherID}`)\n    .then(response => response.json())\n    .then((data) => {\n      Object.keys(data)[0] === 'error' ? setGroupAdded(-1) : setGroupAdded(1);\n      setGroupData(defaultGroupData);\n      document.getElementById('addGroup').reset();\n    })\n  }\n\n  const addPayment = (event) => {\n    event.preventDefault();\n    const date = paymentData.startDate;\n    const sum = paymentData.sum;\n\n\n    fetch(`http://${server_host_name}:3001/addPayment?date=${date}&sum=${sum}`)\n    .then(response => response.json())\n    .then((data) => {\n      Object.keys(data)[0] === 'error' ? setPaymentAdded(-1) : setPaymentAdded(1);\n      setPaymentData(defaultPaymentData);\n      document.getElementById('addPayment').reset();\n    })\n  }\n\n  const deletePerson = (event) => {\n    event.preventDefault();\n\n    fetch(`http://${server_host_name}:3001/deletePerson?id=${idToDelete}`)\n    .then(response => response.json())\n    .then(data => {\n      Object.keys(data)[0] === 'error' || Object.values(data)[0] === 0 ? setUserDeleted(-1) : setUserDeleted(prevState => prevState + 1);\n      document.getElementById('deletePerson').reset();\n    })\n  }\n\n  React.useEffect(() => {\n    fetch(`http://${server_host_name}:3001/`)\n      .then(response => response.json())\n      .then(data => {\n        setData(data);\n      }).then(() => fetch(`http://${server_host_name}:3001/getSchulungsleitIDs`))\n\t\t  .then(response => response.json())\n\t\t  .then(data => {\n      setSchulungsleitIDs(data);\n\t\t  }).then(() => fetch(`http://${server_host_name}:3001/getGruppenIDs`))\n\t\t  .then(response => response.json())\n\t\t  .then(data => {\n\t\t\tsetGruppenIDs(data);\n\t\t  }).then(() => fetch(`http://${server_host_name}:3001/getZahlungIDs`))\n\t\t  .then(response => response.json())\n\t\t  .then(data => {\n\t\t\tsetZahlungIDs(data);\n\t\t  }).then(() => fetch(`http://${server_host_name}:3001/getManagerIDs`))\n\t\t  .then(response => response.json())\n\t\t  .then(data => {\n\t\t\tsetManagerIDs(data);\n\t\t  }).catch(err => console.log(err));\n      const timeOut = error ? 10000 : 5000;\n      setTimeout(() => {\n        setUserAdded(0);\n        setUserDeleted(0);\n        setPaymentAdded(0);\n        setGroupAdded(0);\n        setError(null);\n      }, timeOut);\n  }, [userAdded, userDeleted, groupAdded, paymentAdded, error]);\n\n  return (\n    <div className=\"home-container\">\n      <Helmet>\n        <title>DBS Project</title>\n        <meta property=\"og:title\" content=\"DBS Project\" />\n      </Helmet>\n      <div className=\"home-hero\">\n        <div className=\"home-container01\">\n          <div className=\"home-card\">\n            <h1 className=\"home-text HeadingOne\">React + NodeJS DBS Project</h1>\n            <h1 className=\"home-text01 HeadingOne\">by Yehor Chulkov</h1>\n            <span className=\"home-text02\">Online German school</span>\n          </div>\n        </div>\n      </div>\n      <img\n        alt=\"curved\"\n        src=\"/playground_assets/curved6-1500h.jpg\"\n        className=\"home-image\"\n      />\n      <section className=\"home-features\">\n        \n        <div className=\"home-container-main-row\">\n          {data && managerIDs && gruppenIDs && zahlungIDs && schulungsleitIDs ?\n          <AddPerson personChangeHandler={personChangeHandler} addPerson={addPerson} personRoleChangeHandler={personRoleChangeHandler} personData={personData} schulungsleitIDs={schulungsleitIDs} managerIDs={managerIDs} gruppenIDs={gruppenIDs} zahlungIDs={zahlungIDs} userAdded={userAdded} setUserAdded={setUserAdded} error={error} />\n          :\n          <Loading header={\"Add person:\"} />\n          }\n          {data ?\n            <DeletePerson deletePerson={deletePerson} idToDeleteHandler={idToDeleteHandler} idToDelete={idToDelete} userDeleted={userDeleted} data={data} /> \n          :\n            <Loading header={\"Delete person:\"} />\n        \t}\n        </div>\n          <br/>\n          <br/>\n        <div className=\"home-container-main-row\">\n          {schulungsleitIDs ? \n          <AddGroup groupChangeHandler={groupChangeHandler} addGroup={addGroup} groupData={groupData} schulungsleitIDs={schulungsleitIDs} groupAdded={groupAdded} setGroupAdded={setGroupAdded} />\n          :\n          <Loading header={\"Add group:\"} />\n          }\n          {data ?\n            <AddPayment paymentChangeHandler={paymentChangeHandler} addPayment={addPayment} paymentData={paymentData} paymentAdded={paymentAdded} setPaymentAdded={setPaymentAdded} />\n          :\n            <Loading header={\"Delete person:\"} />\n        \t}\n        </div>\n        \n        \n\n        <div className=\"home-container-main-row\">\n          <div className=\"home-container-row\" id=\"tableViewsRow\">\n           <div className=\"tableViews\">Table views:</div>\n          </div>\n        </div>\n        <div className=\"home-container-main-row\">\n          {data ? \n          <TableWithPagination userAdded={userAdded} userDeleted={userDeleted} /> \n          : \n          <Loading header={\"Table view:\"} />\n          }\n        </div>\n      </section>\n     \n      <section className=\"home-testimonials\">\n        <div className=\"home-container45\">\n          <div className=\"home-container46\">\n            <div className=\"home-container47\">\n              <h2 className=\"home-text38 HeadingOne\">That's it!</h2>\n              <p className=\"home-text39 Lead\">\n                <span className=\"home-text40\">\n                  Thanks for your attention! \n                </span>\n              </p>\n              <p className=\"home-text41\">Yehor Chulkov</p>\n              <p className=\"home-text42 Small\">University of Vienna</p>\n              <div className=\"home-container48\">\n                <img\n                  alt=\"chulkov yehor\"\n                  src=\"/playground_assets/chulkov.jpg\"\n                  className=\"home-image01\"\n                />\n              </div>\n            </div>\n          </div>\n          <div className=\"home-logos\">\n            <div className=\"home-container51\">\n              <div className=\"home-container52\">\n                <div className=\"home-container53\">\n                  <img\n                    alt=\"html5\"\n                    src=\"/playground_assets/html5.png\"\n                    className=\"home-image04\"\n                  />\n                </div>\n                <div className=\"home-container54\">\n                  <img\n                    alt=\"css\"\n                    src=\"/playground_assets/css.png\"\n                    className=\"home-image05\"\n                  />\n                </div>\n                <div className=\"home-container55\">\n                  <img\n                    alt=\"js\"\n                    src=\"/playground_assets/JS.png\"\n                    className=\"home-image06\"\n                  />\n                </div>\n              </div>\n              <div className=\"home-container56\">\n                <div className=\"home-container57\">\n                  <img\n                    alt=\"nodeJS\"\n                    src=\"/playground_assets/nodeJS.png\"\n                    className=\"home-image07\"\n                  />\n                </div>\n                <div className=\"home-container58\">\n                  <img\n                    alt=\"react\"\n                    src=\"/playground_assets/React-icon.png\"\n                    className=\"home-image08\"\n                  />\n                </div>\n\n              </div>\n            </div>\n          </div>\n        </div>\n        <img\n          alt=\"wave\"\n          src=\"/playground_assets/bottom.svg\"\n          className=\"home-bottom-wave-image\"\n        />\n        <img\n          alt=\"home\"\n          src=\"/playground_assets/waves-white.svg\"\n          className=\"home-image12\"\n        />\n        <img\n          alt=\"wave\"\n          src=\"/playground_assets/top.svg\"\n          className=\"home-top-wave-image\"\n        />\n      </section>\n    </div>\n  )\n}\n\nexport default Home\n","/home/yehor/React/DBS/client/dbs/src/components/deletePerson.js",[],[],"/home/yehor/React/DBS/client/dbs/src/components/loading.js",[],[],"/home/yehor/React/DBS/client/dbs/src/components/addGroup.js",[],[],"/home/yehor/React/DBS/client/dbs/src/components/addPerson.js",[],[],"/home/yehor/React/DBS/client/dbs/src/components/addPayment.js",[],[],"/home/yehor/React/DBS/client/dbs/src/components/tableWithPagination.js",["49"],[],"/home/yehor/React/DBS/client/dbs/src/components/tableData.js",[],[],{"ruleId":"50","severity":1,"message":"51","line":248,"column":6,"nodeType":"52","endLine":248,"endColumn":63,"suggestions":"53"},{"ruleId":"50","severity":1,"message":"54","line":46,"column":6,"nodeType":"52","endLine":46,"endColumn":101,"suggestions":"55"},"react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'server_host_name'. Either include it or remove the dependency array.","ArrayExpression",["56"],"React Hook useEffect has a missing dependency: 'server_host_name'. Either include it or remove the dependency array.",["57"],{"desc":"58","fix":"59"},{"desc":"60","fix":"61"},"Update the dependencies array to be: [userAdded, userDeleted, groupAdded, paymentAdded, error, server_host_name]",{"range":"62","text":"63"},"Update the dependencies array to be: [page, pageSize, addPersonLoading, totalPages, currentView, props.userAdded, props.userDeleted, server_host_name]",{"range":"64","text":"65"},[7910,7967],"[userAdded, userDeleted, groupAdded, paymentAdded, error, server_host_name]",[1452,1547],"[page, pageSize, addPersonLoading, totalPages, currentView, props.userAdded, props.userDeleted, server_host_name]"]